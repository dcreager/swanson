# S0

Let's try this again.

An **environment** is a mapping from names to entities.  An **entity** is the
basic unit of "stuff" that S0 can operate on: either an atom, a closure, a
literal, or an object.  An **object**, just like an environment, is a mapping
from names to entities.  An **atom** is an opaque thing that has its own
identity, but which you can't really do anything else with.  (The type
unification algorithm will be able to compare atoms to see if they're identical,
but you can't do that directly.)  A **literal** is some raw binary content that
we need to bootstrap things like strings and numbers and whatnot.  And a
**closure** represents another chunk of code that you can pass control to.  It
consists of an environment, and a mapping from names to blocks.

A **block** is a chunk of code that can be executed.  Its job is to construct an
environment, and then pass control to some other closure.  A block consists of
an input set, a sequence of zero or more constructors, and an invocation.  An
**input set** is a mapping from names to types, which represents the values that
the caller must provide when invoking this block.  A **constructor** is an
instruction that creates a new entity with a particular name.  Together, the
block's input set and constructors define an environment that the block's
invocation operates in.  The names in the block's input set, and all of the
names of any constructors in the block, must be distinct.  The **invocation** is
an instruction that passes control to one of the blocks in a closure, drawn from
the environment by name.  Invoking the closure consumes it — that is, the
closure is removed from the environment immediately before passing control to
the block in question.  The remaining environment is combined with the
environment inside the closure, which is then "passed in" as the input set of
the block that you're passing control to.

## Data model

    Name
    Binary
    Environment = Name → Entity
    Entity = Atom | Closure | Literal Binary | Object
    Object = Name → Entity
    Closure = Environment + (Name → Block)
    Block = Inputs + [Constructor] + Invocation Name Name
    Inputs = Name → Type
    Constructor = CreateAtom Name
                | CreateClosure Name [Name] (Name → Block)
                | CreateLiteral Binary
                | CreateObject Name [Name]
                | Rename Name Name

## Operational semantics

    [Constructor] = Environment → (Environment | Error)
